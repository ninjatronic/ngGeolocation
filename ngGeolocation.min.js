"use strict";angular.module("ngGeolocation",[]).factory("$geolocation",["$rootScope","$window","$q",function(a,b,c){if(!b.navigator||!b.navigator.geolocation)return{supported:!1,getCurrentPosition:function(){var a=c.defer();return a.reject(this.position),a.promise},watchPosition:angular.noop,clearWatch:angular.noop,position:{error:{code:2,message:"This web browser does not support HTML5 Geolocation"}}};var d=null,e={supported:!0,getCurrentPosition:function(a){var d=c.defer();return b.navigator.geolocation.getCurrentPosition(function(a){angular.copy(a,e.position),d.resolve(a)},function(a){d.reject({error:a})},a),d.promise},watchPosition:function(c){return d?!1:(d=b.navigator.geolocation.watchPosition(function(b){a.$apply(function(){angular.copy(b,e.position),a.$broadcast("$geolocation.position.changed",b)})},function(b){a.$apply(function(){angular.copy({error:b},e.position),a.$broadcast("$geolocation.position.error",b)})},c),!0)},clearWatch:function(){d&&(b.navigator.geolocation.clearWatch(d),d=null)},position:{}};return e}]);